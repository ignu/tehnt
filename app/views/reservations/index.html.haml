%h2= "#{@campground.name} Reservations "
.heading
  = "#{@start_date.strftime("%m/%d/%Y")} to #{@end_date.strftime("%m/%d/%Y")}"
  %a.reservation{:campground_id=>@campground.id, :campground_name=>@campground.name} Change Reservation Dates
= render :partial => 'layouts/datepicker'

.spacer &nbsp;
-form_tag '/reservations/new', :method=> :post, :id=>'campsite_selection' do 
  =hidden_field :dates, :reservation_start_date, :value=> @start_date.to_s
  =hidden_field :dates, :reservation_end_date, :value=> @end_date.to_s
  .campsites
    -for campsite in @campsites
      %h3= campsite.name

      -if !admin?
        %div.beds
          = "#{campsite.beds} beds."
          = "in council $#{campsite.price}, out of council $#{campsite.ooc_price ? campsite.ooc_price : 'na'}"
          
      
      - reservations = campsite.reservations.between(@start_date, @end_date)
      -if reservations.empty?
        %span.available=" Check to reserve "
        =check_box :selected_campsites, campsite.id

      -else
        -for reservation in reservations
          %b="Reserved: #{reservation.end_date.strftime("%m/%d/%Y")} - #{reservation.start_date.strftime("%m/%d/%Y")}"
          -if admin?
            .admininfo
              .right
                .info
                  ="Group Number  #{reservation.group_number}"
                .info
                  ="Council Name #{reservation.council_name}"
              .right
                .info
                  ="District Name #{reservation.district_name}"
                .info
                  ="Other Group Name #{reservation.other_group_name}"
                .info
                  ="Group Type #{reservation.group_type}"

              .div
                .info
                  %b="Paid in Full: #{reservation.paid_in_full ? 'yes' : 'no'}"
              -for registrant in reservation.registrants
                .spacer &nbsp;
                .info
                  %b
                    =registrant.first_name
                    =registrant.last_name
                  %i=registrant.position
                .info
                  ="#{registrant.address} #{registrant.city}, #{registrant.address_state} #{registrant.zip}"
                .info
                  ="#{registrant.phone}"

            -if !reservation.paid_in_full
              %button.not_paid{:reservation_id=>reservation.id} Mark As Paid
            -else
              %button.paid_in_full{:reservation_id=>reservation.id} Mark As Unpaid
    =submit_tag 'Create Reservation'
